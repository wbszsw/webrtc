(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Home"],{"0538":function(t,e,n){"use strict";var r=n("1c0b"),o=n("861d"),i=[].slice,a={},c=function(t,e,n){if(!(e in a)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=i.call(arguments,1),a=function(){var r=n.concat(i.call(arguments));return this instanceof a?c(e,r.length,r):e.apply(t,r)};return o(e.prototype)&&(a.prototype=e.prototype),a}},"057f":function(t,e,n){var r=n("fc6a"),o=n("241c").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return o(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?c(t):o(r(t))}},"087c":function(t,e,n){"use strict";n("aa6d")},"131a":function(t,e,n){var r=n("23e7"),o=n("d2bb");r({target:"Object",stat:!0},{setPrototypeOf:o})},"159b":function(t,e,n){var r=n("da84"),o=n("fdbc"),i=n("17c2"),a=n("9112");for(var c in o){var s=r[c],u=s&&s.prototype;if(u&&u.forEach!==i)try{a(u,"forEach",i)}catch(f){u.forEach=i}}},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,o=n("a640"),i=o("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"1ac5":function(t,e,n){},"1dde":function(t,e,n){var r=n("d039"),o=n("b622"),i=n("2d00"),a=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"21a4":function(t,e,n){"use strict";n("1ac5")},3410:function(t,e,n){var r=n("23e7"),o=n("d039"),i=n("7b0b"),a=n("e163"),c=n("e177"),s=o((function(){a(1)}));r({target:"Object",stat:!0,forced:s,sham:!c},{getPrototypeOf:function(t){return a(i(t))}})},4160:function(t,e,n){"use strict";var r=n("23e7"),o=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"4ae1":function(t,e,n){var r=n("23e7"),o=n("d066"),i=n("1c0b"),a=n("825a"),c=n("861d"),s=n("7c73"),u=n("0538"),f=n("d039"),l=o("Reflect","construct"),h=f((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),p=!f((function(){l((function(){}))})),d=h||p;r({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(t,e){i(t),a(e);var n=arguments.length<3?t:i(arguments[2]);if(p&&!h)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(u.apply(t,r))}var o=n.prototype,f=s(c(o)?o:Object.prototype),d=Function.apply.call(t,f,e);return c(d)?d:f}})},5971:function(t,e,n){},"65f0":function(t,e,n){var r=n("861d"),o=n("e8b5"),i=n("b622"),a=i("species");t.exports=function(t,e){var n;return o(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"746f":function(t,e,n){var r=n("428f"),o=n("5135"),i=n("e538"),a=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},"7a82":function(t,e,n){var r=n("23e7"),o=n("83ab"),i=n("9bf2");r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:i.f})},8418:function(t,e,n){"use strict";var r=n("c04e"),o=n("9bf2"),i=n("5c6c");t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}},"87f7":function(t,e,n){},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(M){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=C(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(M){return{type:"throw",arg:M}}}t.wrap=u;var l="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function y(){}function m(){}function g(){}var b={};b[i]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(P([])));x&&x!==n&&r.call(x,i)&&(b=x);var O=g.prototype=y.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"===typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(s.arg)}var o;function i(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}this._invoke=i}function C(t,e,n){var r=l;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return L()}n.method=o,n.arg=i;while(1){var a=n.delegate;if(a){var c=_(a,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=f(t,e,n);if("normal"===s.type){if(r=n.done?d:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=d,n.method="throw",n.arg=s.arg)}}}function _(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=f(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var n=t[i];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){while(++o<t.length)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}return m.prototype=O.constructor=g,g.constructor=m,m.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,c,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},S(k.prototype),k.prototype[a]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),s(O,c,"Generator"),O[i]=function(){return this},O.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;R(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},"99af":function(t,e,n){"use strict";var r=n("23e7"),o=n("d039"),i=n("e8b5"),a=n("861d"),c=n("7b0b"),s=n("50c4"),u=n("8418"),f=n("65f0"),l=n("1dde"),h=n("b622"),p=n("2d00"),d=h("isConcatSpreadable"),v=9007199254740991,y="Maximum allowed index exceeded",m=p>=51||!o((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),g=l("concat"),b=function(t){if(!a(t))return!1;var e=t[d];return void 0!==e?!!e:i(t)},w=!m||!g;r({target:"Array",proto:!0,forced:w},{concat:function(t){var e,n,r,o,i,a=c(this),l=f(a,0),h=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?a:arguments[e],b(i)){if(o=s(i.length),h+o>v)throw TypeError(y);for(n=0;n<o;n++,h++)n in i&&u(l,h,i[n])}else{if(h>=v)throw TypeError(y);u(l,h++,i)}return l.length=h,l}})},a15b:function(t,e,n){"use strict";var r=n("23e7"),o=n("44ad"),i=n("fc6a"),a=n("a640"),c=[].join,s=o!=Object,u=a("join",",");r({target:"Array",proto:!0,forced:s||!u},{join:function(t){return c.call(i(this),void 0===t?",":t)}})},a434:function(t,e,n){"use strict";var r=n("23e7"),o=n("23cb"),i=n("a691"),a=n("50c4"),c=n("7b0b"),s=n("65f0"),u=n("8418"),f=n("1dde"),l=f("splice"),h=Math.max,p=Math.min,d=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var n,r,f,l,y,m,g=c(this),b=a(g.length),w=o(t,b),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=b-w):(n=x-2,r=p(h(i(e),0),b-w)),b+n-r>d)throw TypeError(v);for(f=s(g,r),l=0;l<r;l++)y=w+l,y in g&&u(f,l,g[y]);if(f.length=r,n<r){for(l=w;l<b-r;l++)y=l+r,m=l+n,y in g?g[m]=g[y]:delete g[m];for(l=b;l>b-r+n;l--)delete g[l-1]}else if(n>r)for(l=b-r;l>w;l--)y=l+r-1,m=l+n-1,y in g?g[m]=g[y]:delete g[m];for(l=0;l<n;l++)g[l+w]=arguments[l+2];return g.length=b-r+n,f}})},a4d3:function(t,e,n){"use strict";var r=n("23e7"),o=n("da84"),i=n("d066"),a=n("c430"),c=n("83ab"),s=n("4930"),u=n("fdbf"),f=n("d039"),l=n("5135"),h=n("e8b5"),p=n("861d"),d=n("825a"),v=n("7b0b"),y=n("fc6a"),m=n("c04e"),g=n("5c6c"),b=n("7c73"),w=n("df75"),x=n("241c"),O=n("057f"),S=n("7418"),k=n("06cf"),C=n("9bf2"),_=n("d1e7"),j=n("9112"),R=n("6eeb"),E=n("5692"),P=n("f772"),L=n("d012"),M=n("90e3"),T=n("b622"),A=n("e538"),D=n("746f"),N=n("d44e"),I=n("69f3"),F=n("b727").forEach,U=P("hidden"),$="Symbol",V="prototype",W=T("toPrimitive"),G=I.set,J=I.getterFor($),H=Object[V],q=o.Symbol,K=i("JSON","stringify"),Y=k.f,B=C.f,Q=O.f,X=_.f,z=E("symbols"),Z=E("op-symbols"),tt=E("string-to-symbol-registry"),et=E("symbol-to-string-registry"),nt=E("wks"),rt=o.QObject,ot=!rt||!rt[V]||!rt[V].findChild,it=c&&f((function(){return 7!=b(B({},"a",{get:function(){return B(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Y(H,e);r&&delete H[e],B(t,e,n),r&&t!==H&&B(H,e,r)}:B,at=function(t,e){var n=z[t]=b(q[V]);return G(n,{type:$,tag:t,description:e}),c||(n.description=e),n},ct=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof q},st=function(t,e,n){t===H&&st(Z,e,n),d(t);var r=m(e,!0);return d(n),l(z,r)?(n.enumerable?(l(t,U)&&t[U][r]&&(t[U][r]=!1),n=b(n,{enumerable:g(0,!1)})):(l(t,U)||B(t,U,g(1,{})),t[U][r]=!0),it(t,r,n)):B(t,r,n)},ut=function(t,e){d(t);var n=y(e),r=w(n).concat(dt(n));return F(r,(function(e){c&&!lt.call(n,e)||st(t,e,n[e])})),t},ft=function(t,e){return void 0===e?b(t):ut(b(t),e)},lt=function(t){var e=m(t,!0),n=X.call(this,e);return!(this===H&&l(z,e)&&!l(Z,e))&&(!(n||!l(this,e)||!l(z,e)||l(this,U)&&this[U][e])||n)},ht=function(t,e){var n=y(t),r=m(e,!0);if(n!==H||!l(z,r)||l(Z,r)){var o=Y(n,r);return!o||!l(z,r)||l(n,U)&&n[U][r]||(o.enumerable=!0),o}},pt=function(t){var e=Q(y(t)),n=[];return F(e,(function(t){l(z,t)||l(L,t)||n.push(t)})),n},dt=function(t){var e=t===H,n=Q(e?Z:y(t)),r=[];return F(n,(function(t){!l(z,t)||e&&!l(H,t)||r.push(z[t])})),r};if(s||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=M(t),n=function(t){this===H&&n.call(Z,t),l(this,U)&&l(this[U],e)&&(this[U][e]=!1),it(this,e,g(1,t))};return c&&ot&&it(H,e,{configurable:!0,set:n}),at(e,t)},R(q[V],"toString",(function(){return J(this).tag})),R(q,"withoutSetter",(function(t){return at(M(t),t)})),_.f=lt,C.f=st,k.f=ht,x.f=O.f=pt,S.f=dt,A.f=function(t){return at(T(t),t)},c&&(B(q[V],"description",{configurable:!0,get:function(){return J(this).description}}),a||R(H,"propertyIsEnumerable",lt,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:q}),F(w(nt),(function(t){D(t)})),r({target:$,stat:!0,forced:!s},{for:function(t){var e=String(t);if(l(tt,e))return tt[e];var n=q(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!ct(t))throw TypeError(t+" is not a symbol");if(l(et,t))return et[t]},useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),r({target:"Object",stat:!0,forced:!s,sham:!c},{create:ft,defineProperty:st,defineProperties:ut,getOwnPropertyDescriptor:ht}),r({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:pt,getOwnPropertySymbols:dt}),r({target:"Object",stat:!0,forced:f((function(){S.f(1)}))},{getOwnPropertySymbols:function(t){return S.f(v(t))}}),K){var vt=!s||f((function(){var t=q();return"[null]"!=K([t])||"{}"!=K({a:t})||"{}"!=K(Object(t))}));r({target:"JSON",stat:!0,forced:vt},{stringify:function(t,e,n){var r,o=[t],i=1;while(arguments.length>i)o.push(arguments[i++]);if(r=e,(p(e)||void 0!==t)&&!ct(t))return h(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ct(e))return e}),o[1]=e,K.apply(null,o)}})}q[V][W]||j(q[V],W,q[V].valueOf),N(q,$),L[U]=!0},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},aa6d:function(t,e,n){},b0c0:function(t,e,n){var r=n("83ab"),o=n("9bf2").f,i=Function.prototype,a=i.toString,c=/^\s*function ([^ (]*)/,s="name";r&&!(s in i)&&o(i,s,{configurable:!0,get:function(){try{return a.call(this).match(c)[1]}catch(t){return""}}})},b3bb:function(t,e,n){"use strict";n("5971")},b64b:function(t,e,n){var r=n("23e7"),o=n("7b0b"),i=n("df75"),a=n("d039"),c=a((function(){i(1)}));r({target:"Object",stat:!0,forced:c},{keys:function(t){return i(o(t))}})},b727:function(t,e,n){var r=n("0366"),o=n("44ad"),i=n("7b0b"),a=n("50c4"),c=n("65f0"),s=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,f=4==t,l=6==t,h=7==t,p=5==t||l;return function(d,v,y,m){for(var g,b,w=i(d),x=o(w),O=r(v,y,3),S=a(x.length),k=0,C=m||c,_=e?C(d,S):n||h?C(d,0):void 0;S>k;k++)if((p||k in x)&&(g=x[k],b=O(g,k,w),t))if(e)_[k]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return k;case 2:s.call(_,g)}else switch(t){case 4:return!1;case 7:s.call(_,g)}return l?-1:u||f?f:_}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},b8bf:function(t,e,n){var r=n("23e7"),o=n("83ab"),i=n("7c73");r({target:"Object",stat:!0,sham:!o},{create:i})},bb51:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.socket?n("div",{staticClass:"home streamChat"},[n("Header",{ref:"HeaderDom",attrs:{roomId:"99789898989"}}),n("div",{staticClass:"top"},[n("videoChat",{ref:"videoChat",attrs:{newSocket:t.socket,pubSub:t.pubSub}}),n("textChat",{ref:"textChatDom",attrs:{newSocket:t.socket,pubSub:t.pubSub}})],1)],1):t._e()},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("div",{staticClass:"headerLeft"},[n("div",{staticClass:"RoomId"},[n("span",[t._v("房间号：")]),n("span",[t._v(t._s(t.roomId))])])]),n("div",{staticClass:"headeCenter"}),n("div",{staticClass:"headeRight"},[n("button",{ref:"leaveDom",attrs:{id:"leave"}},[t._v("离开此房间")])])])},a=[];function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n("7a82");function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}n("b8bf"),n("131a");function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function l(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}n("4ae1"),n("3410");function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function d(t){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){return!e||"object"!==d(e)&&"function"!==typeof e?v(t):e}function m(t){var e=p();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function g(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var b=n("2b0e");
/**
  * vue-class-component v7.2.6
  * (c) 2015-present Evan You
  * @license MIT
  */function w(t){return w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t){return S(t)||k(t)||C()}function S(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function k(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function C(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _(){return"undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function j(t,e){R(t,e),Object.getOwnPropertyNames(e.prototype).forEach((function(n){R(t.prototype,e.prototype,n)})),Object.getOwnPropertyNames(e).forEach((function(n){R(t,e,n)}))}function R(t,e,n){var r=n?Reflect.getOwnMetadataKeys(e,n):Reflect.getOwnMetadataKeys(e);r.forEach((function(r){var o=n?Reflect.getOwnMetadata(r,e,n):Reflect.getOwnMetadata(r,e);n?Reflect.defineMetadata(r,o,t,n):Reflect.defineMetadata(r,o,t)}))}var E={__proto__:[]},P=E instanceof Array;function L(t){return function(e,n,r){var o="function"===typeof e?e:e.constructor;o.__decorators__||(o.__decorators__=[]),"number"!==typeof r&&(r=void 0),o.__decorators__.push((function(e){return t(e,n,r)}))}}function M(t){var e=w(t);return null==t||"object"!==e&&"function"!==e}function T(t,e){var n=e.prototype._init;e.prototype._init=function(){var e=this,n=Object.getOwnPropertyNames(t);if(t.$options.props)for(var r in t.$options.props)t.hasOwnProperty(r)||n.push(r);n.forEach((function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0})}))};var r=new e;e.prototype._init=n;var o={};return Object.keys(r).forEach((function(t){void 0!==r[t]&&(o[t]=r[t])})),o}var A=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.name=e.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(t){if("constructor"!==t)if(A.indexOf(t)>-1)e[t]=n[t];else{var r=Object.getOwnPropertyDescriptor(n,t);void 0!==r.value?"function"===typeof r.value?(e.methods||(e.methods={}))[t]=r.value:(e.mixins||(e.mixins=[])).push({data:function(){return x({},t,r.value)}}):(r.get||r.set)&&((e.computed||(e.computed={}))[t]={get:r.get,set:r.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return T(this,t)}});var r=t.__decorators__;r&&(r.forEach((function(t){return t(e)})),delete t.__decorators__);var o=Object.getPrototypeOf(t.prototype),i=o instanceof b["a"]?o.constructor:b["a"],a=i.extend(e);return I(a,t,i),_()&&j(a,t),a}var N={prototype:!0,arguments:!0,callee:!0,caller:!0};function I(t,e,n){Object.getOwnPropertyNames(e).forEach((function(r){if(!N[r]){var o=Object.getOwnPropertyDescriptor(t,r);if(!o||o.configurable){var i=Object.getOwnPropertyDescriptor(e,r);if(!P){if("cid"===r)return;var a=Object.getOwnPropertyDescriptor(n,r);if(!M(i.value)&&a&&a.value===i.value)return}0,Object.defineProperty(t,r,i)}}}))}function F(t){return"function"===typeof t?D(t):function(e){return D(e,t)}}F.registerHooks=function(t){A.push.apply(A,O(t))};var U=F;var $="undefined"!==typeof Reflect&&"undefined"!==typeof Reflect.getMetadata;function V(t,e,n){if($&&!Array.isArray(t)&&"function"!==typeof t&&!t.hasOwnProperty("type")&&"undefined"===typeof t.type){var r=Reflect.getMetadata("design:type",e,n);r!==Object&&(t.type=r)}}function W(t){return void 0===t&&(t={}),function(e,n){V(t,e,n),L((function(e,n){(e.props||(e.props={}))[n]=t}))(e,n)}}var G=function(t){l(n,t);var e=m(n);function n(){return c(this,n),e.apply(this,arguments)}return u(n,[{key:"mounted",value:function(){console.log("guazai:",this.roomId)}}]),n}(b["a"]);g([W()],G.prototype,"roomId",void 0),G=g([U],G);var J=G,H=J,q=(n("21a4"),n("2877")),K=Object(q["a"])(H,i,a,!1,null,"7b18e262",null),Y=K.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"videoChatDom",staticClass:"wrap"},[n("div",{staticClass:"Closebutton"},[n("button",{ref:"joinDom",attrs:{id:"connserver"},on:{click:function(e){return t.createWebRtc()}}},[t._v("Connect Sig Server")])]),n("div",{staticClass:"videoWrap"},[n("div",{staticClass:"preview big change local"},[n("video",{ref:"LocalStreamDom",attrs:{id:"localvideo",autoplay:"",playsinline:""}})]),n("div",{staticClass:"remote small change others"},[n("video",{ref:"othersVideoDomArr",staticClass:"othersVideos",attrs:{id:"remotevideo",autoplay:"",playsinline:""}})])])])},Q=[],X={props:["newSocket","pubSub"],data:function(){return{}},methods:{createWebRtc:function(){var t=document.querySelector("#localvideo"),e=[document.querySelector("#remotevideo")];this.newSocket.openWebRtc(t,e)}},mounted:function(){var t=this;this.$nextTick((function(){console.log("newSocket",t.newSocket)}))}},z=X,Z=(n("b3bb"),Object(q["a"])(z,B,Q,!1,null,"2a5dabde",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right"},[n("div",{staticClass:"rightTop"},[n("div",{staticClass:"title"},[t._v("聊天室成员")]),n("ul",{ref:"friendList",staticClass:"friendList"},t._l(t.userList,(function(e,r){return n("li",{staticClass:"friendItem",on:{click:function(n){return t.toVideoChat(e)}}},[t._m(0,!0),n("div",{staticClass:"friendCenter"},[n("div",{staticClass:"friendName"},[n("span",[t._v(t._s(e.name))])])]),t._m(1,!0)])})),0)]),n("div",{staticClass:"message rightBottom"},[n("ul",{ref:"textMsgList",staticClass:"textMsgList"},t._l(t.chatArr,(function(e,r){return n("li",{class:e.user===t.user?"chatMy chatItem":"chatOthers chatItem"},[t._m(2,!0),n("div",{staticClass:"TextRight"},[n("span",[t._v(t._s(e.textChat))])])])})),0),n("div",{staticClass:"textMsgInput"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.textMeg,expression:"textMeg"}],ref:"textMsgDom",staticClass:"inputs",attrs:{type:"text",placeholder:"消息"},domProps:{value:t.textMeg},on:{input:function(e){e.target.composing||(t.textMeg=e.target.value)}}}),n("button",{ref:"subMitDom",staticClass:"sendMsg",on:{click:function(e){return t.sendTextMsg()}}},[t._v("发送")])])])])},nt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"FriendLeft"},[n("img",{attrs:{src:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2980896150,1513192047&fm=26&gp=0.jpg",alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"FriendRight"},[n("div",{staticClass:"mediaWrap"},[n("div",{staticClass:"videoIcon"}),n("div",{staticClass:"audioIcon"})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"TextLeft"},[n("img",{attrs:{src:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2980896150,1513192047&fm=26&gp=0.jpg",alt:""}})])}];n("b0c0");function rt(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,o)}function ot(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){rt(i,r,o,a,c,"next",t)}function c(t){rt(i,r,o,a,c,"throw",t)}a(void 0)}))}}n("96cf"),n("99af"),n("b64b"),n("4160"),n("159b");function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n("a15b");var at=function(){function t(e){var n=this;c(this,t),it(this,"_localStream",null),it(this,"_localOptions",{video:!0,audio:!0}),it(this,"_othersOptions",{video:!0,audio:!0}),it(this,"createPeerConnection",(function(t,e){console.log(".......................func createPeerConnection");var r=n;if(r.pc||(n.pc=new RTCPeerConnection(n.pcConfig),console.log("this.pc",n.pc),n.pc.onicecandidate=function(n){console.log("element",n),n.candidate&&e({type:"candidate",types:"webRtc",label:n.candidate.sdpMLineIndex,id:n.candidate.sdpMid,candidate:n.candidate.candidate},t)},n.pc.ontrack=function(t){console.log("ontrack",t),n.OtherVideoArr[0].srcObject=t.streams[0]}),null!==n.pc&&void 0!==n.pc){if(null!==n.localStream&&void 0!==n.localStream)return n.localStream&&(console.log("localStream",n.localStream),n.localStream.getTracks().forEach((function(t){n.pc.addTrack(t,n.localStream)}))),Promise.resolve();console.error("localStream is null or undefined!")}else console.error("chat this.pc is null or undefined!")})),it(this,"closeLocalMedia",(function(){return n.localStream&&n.localStream.getTracks()&&n.localStream.getTracks().forEach((function(t){t.stop()})),n.localStream=null,Promise.resolve()})),it(this,"getOffer",(function(t,e,r){n.pc.setLocalDescription(t),r(t,e)})),it(this,"handleOfferError",(function(t){console.error("Failed to get Offer!",t)})),this.pcConfig={iceServers:[{urls:"stun:stun.l.google.com:19302",credential:"123456",username:"huang"}]},this.videoDom=null,this.OtherVideoArr=null,this.pc=null,this.localOptions=e}return u(t,[{key:"localStream",get:function(){return this._localStream},set:function(t){this._localStream=t}},{key:"otherOptions",get:function(){return this._othersOptions},set:function(t){this._othersOptions=t}},{key:"init",value:function(){var t=ot(regeneratorRuntime.mark((function t(e,n){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.videoDom=e,this.OtherVideoArr=n,console.log(e,n),r=this,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){t.next=9;break}return console.log("getUserMedia is not supported!"),t.abrupt("return");case 9:return console.log("初始化配置参数",this.localOptions),t.next=12,navigator.mediaDevices.getUserMedia(this.localOptions);case 12:return o=t.sent,t.prev=13,t.next=16,r.getMediaStream(o);case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t["catch"](13),t.next=22,r.handleError(t.t0);case 22:case"end":return t.stop()}}),t,this,[[13,18]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getMediaStream",value:function(t){return this.localStream=t,console.log(this.videoDom,t),this.videoDom.srcObject=t,Promise.resolve(this.localStream)}},{key:"handleError",value:function(t){t&&console.error("getUserMedia  error:",t)}},{key:"closePeerConnection",value:function(){return this.pc&&(this.pc.close(),this.pc=null),Promise.resolve()}},{key:"callRtc",value:function(){var t=ot(regeneratorRuntime.mark((function t(e,n,r){var o,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=this,"joined_conn"!==e){t.next=16;break}if(!o.pc){t.next=16;break}return console.log("this.pc ",o.pc),i={offerToReceiveAudio:1,offerToReceiveVideo:1},t.next=7,o.pc.createOffer(i);case 7:return a=t.sent,t.prev=8,t.next=11,o.getOffer(a,n,r);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](8),o.handleOfferError(t.t0);case 16:case"end":return t.stop()}}),t,this,[[8,13]])})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"getAnswer",value:function(){var t=ot(regeneratorRuntime.mark((function t(e,n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.pc.setLocalDescription(e);case 2:r(e,n);case 3:case"end":return t.stop()}}),t,this)})));function e(e,n,r){return t.apply(this,arguments)}return e}()}]),t}(),ct=at;console.log(ct);var st=function(t){l(n,t);var e=m(n);function n(t,r){var o;return c(this,n),o=e.call(this,r),it(v(o),"join",(function(){return Promise.resolve()})),it(v(o),"leave",(function(){return o.socket&&o.socket.emit("leave",o.roomid),o.closePeerConnection(),o.closeLocalMedia(),Promise.resolve()})),it(v(o),"connect",(function(t){console.log("welcome to socket connect");try{return Promise.resolve()}catch(e){return Promise.reject(e)}})),it(v(o),"socketTarget",ot(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=v(o),!e.socket){t.next=6;break}return e.socket,t.abrupt("return");case 6:return t.abrupt("return",Promise.reject("peleese first send socketio!"));case 7:case"end":return t.stop()}}),t)})))),it(v(o),"closeConnect",(function(t){})),it(v(o),"textMsg",(function(t){o.socket||o.joinRoom();var e=n.appendTextMsg(t,!0);return e&&o.TextMsgListDom.appendChild(e),Promise.resolve()})),o.roomid=t,o.socket=null,o.state=null,o.TextMsgListDom="",o.friendListDom="",o.pubSub={},o}return u(n,[{key:"initPubSub",value:function(t){this.pubSub=t}},{key:"sendMessage",value:function(t,e){var n=this.socket;this.socket&&n.emit("message",t,e)}}],[{key:"appendTextMsg",value:function(t,e){if(!t)return!1;var n=document.createElement("li");n.className=e?"chatMy chatItem":"chatOthers chatItem";var r=document.createElement("div");r.className="TextLeft";var o=document.createElement("img");o.src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2980896150,1513192047&fm=26&gp=0.jpg",r.appendChild(o);var i=document.createElement("div");i.className="TextRight";var a=document.createElement("span");return a.innerHTML=t,i.appendChild(a),n.appendChild(r),n.appendChild(i),n}},{key:"joinRoom",value:function(){var t=ot(regeneratorRuntime.mark((function t(e,r,o,i,a,c,s,u){var f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return f=new n(e,i,a,c,s,u),t.next=3,f.init();case 3:return t.next=5,f.connect(r);case 5:return t.next=7,f.socketTarget();case 7:return t.next=9,f.join();case 9:return t.next=11,f.textMsg(o);case 11:return t.abrupt("return",f);case 12:case"end":return t.stop()}}),t)})));function e(e,n,r,o,i,a,c,s){return t.apply(this,arguments)}return e}()}]),n}(ct),ut=st,ft=function(){function t(e,n){var r=this;c(this,t),this.roomid=e,this.user=n,this.to="";var o=new WebSocket("wss://".concat(window.location.host,"/webRtc/roomid=").concat(e,"/user=").concat(n));this.ws=o,this.Chat=null,this.state="wait....",this.newVue={},this.userList=[],o.addEventListener("open",(function(t){o.send(JSON.stringify({types:"open",message:"websocket is open!"}))})),o.addEventListener("close",(function(t){o.send({types:"close",message:"websocket is close!"})})),o.addEventListener("message",function(){var t=ot(regeneratorRuntime.mark((function t(e){var n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.data?(console.log("message服务器回复 e.data",e.data),n=JSON.parse(e.data)):(console.log("message服务器回复 e",e),n={}),"join"==n.types&&(r.state="join",console.log("************************************join"),r.getUser()),"textChat"===n.types&&r.submitText(n),"mediaRtcChat"===n.types&&r.mediaRtcChat(n),"getUser"===n.type&&r.showUsers(n),"callRtc"===n.types&&(r.state="callRtc",r.listenCall(n)),"offer"!=n.type){t.next=24;break}return console.log("......................type   offer"),t.next=10,r.Chat.pc.setRemoteDescription(new RTCSessionDescription(n));case 10:return t.next=12,r.Chat.pc.createAnswer();case 12:return o=t.sent,t.prev=13,t.next=16,r.Chat.getAnswer(o,r,r.sendMessage);case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t["catch"](13),t.next=22,r.Chat.handleAnswerError(t.t0);case 22:t.next=25;break;case 24:"answer"===n.type?(console.log("......................type   answer"),console.log("reveive client message=====>",n),r.Chat.pc.setRemoteDescription(new RTCSessionDescription(n))):"candidate"===n.type&&(console.log("......................type   candidate"),i=new RTCIceCandidate({sdpMLineIndex:n.label,candidate:n.candidate}),r.Chat.pc.addIceCandidate(i));case 25:case"end":return t.stop()}}),t,null,[[13,18]])})));return function(e){return t.apply(this,arguments)}}()),this.pubSub={}}return u(t,[{key:"mediaRtcChat",value:function(t){if(null!==t&&void 0!==t&&t.data){var e=t.data,n=this.Chat.pc,r=this.Chat.getAnswer,o=this.Chat.handleAnswerError;if(e)if("offer"===e.type)n.setRemoteDescription(new RTCSessionDescription(e)),n.createAnswer().then(r)["catch"](o);else if("answer"===e.type)console.log("reveive client message=====>",e),n.setRemoteDescription(new RTCSessionDescription(e));else if("candidate"===e.type){var i=new RTCIceCandidate({sdpMLineIndex:e.label,candidate:e.candidate});n.addIceCandidate(i)}else console.error("the message is invalid!",e);console.log("reveive client message",roomid,id,e)}}},{key:"getUser",value:function(){console.log("........getUser"),this.sendMsg({types:"getUser"})}},{key:"showUsers",value:function(t){console.log("12321",t.roomObj[this.roomid]),this.userList=Object.keys(t.roomObj[this.roomid]),console.log("userlist",this.userList);var e=[];this.userList.forEach((function(t){var n={};n.name=t,n.options={audio:!0,video:!0},e.push(n)})),console.log("jieguoArr",e),this.pubSub.publish("getUserList",JSON.stringify(e))}},{key:"sendMsg",value:function(t){console.log("options",t),this.ws?this.ws.send(JSON.stringify(t)):console.log("初始化没完成...")}},{key:"join",value:function(){}},{key:"sendMessage",value:function(t,e){console.log("sendmessage",t),console.log(e),e.sendMsg(t)}},{key:"leave",value:function(){var t=ot(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.Chat.closePeerConnection();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"submitText",value:function(t){console.log("文字聊天到处理",t,this.pubSub),this.pubSub.publish("chat",JSON.stringify(t))}},{key:"openWebRtc",value:function(){var t=ot(regeneratorRuntime.mark((function t(e,n,r,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.to=r,this.from=o,t.next=4,this.Chat.init(e,n);case 4:return t.next=6,this.Chat.createPeerConnection(this,this.sendMessage);case 6:this.sendMsg({types:"callRtc",to:r,from:o});case 7:case"end":return t.stop()}}),t,this)})));function e(e,n,r,o){return t.apply(this,arguments)}return e}()},{key:"listenCall",value:function(){var t=ot(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("接到什么信息",e),this.user!==e.to){t.next=15;break}return n=document.querySelector("#localvideo"),r=[document.querySelector("#remotevideo")],t.next=6,this.Chat.init(n,r);case 6:return t.next=8,this.Chat.createPeerConnection(this,this.sendMessage);case 8:if(console.log("****************".concat(e.from,"和你通话")),console.log("...............func listen Call"),"joined_unbind"!=this.state){t.next=13;break}return t.next=13,this.Chat.createPeerConnection(this["this"].sendMessage);case 13:this.state="joined_conn",this.Chat.callRtc(this.state,this,this.sendMessage);case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"DowebRtc",value:function(){var t=ot(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"proxys",value:function(t){var e=new Proxy(t,(function(){}));return e}},{key:"initVue",value:function(t){this.newVue=t,console.log("initVye",this)}},{key:"initPubsub",value:function(t){this.pubSub=t,this.Chat.initPubSub(t)}}],[{key:"init",value:function(e,n,r){var o=new ut(e,r),i=new t(e,n);return i.Chat=o,i}}]),t}(),lt=ft,ht={props:["newSocket","pubSub"],data:function(){return{textMeg:"",socket:null,userList:[],user:null,chatArr:[]}},methods:{toVideoChat:function(t){if(t.name==this.user)return console.log("不要和自己通话");var e=document.querySelector("#localvideo"),n=[document.querySelector("#remotevideo")];this.newSocket.openWebRtc(e,n,t.name,this.user)},chat:function(){var t=this;this.pubSub.addEvent("chat",(function(e){e&&t.chatArr.push(JSON.parse(e))}))},getUserList:function(){var t=this;this.pubSub.addEvent("getUserList",(function(e){e&&(console.log("获取用户列表",e),t.userList=JSON.parse(e))}))},sendTextMsg:function(){this.newSocket.sendMsg({types:"textChat",user:this.user,textChat:this.textMeg})}},mounted:function(){var t=this;this.$nextTick((function(){t.user=t.$route.query.user})),this.chat(),this.getUserList()}},pt=ht,dt=(n("087c"),Object(q["a"])(pt,et,nt,!1,null,null,null)),vt=dt.exports,yt=(n("c740"),n("a434"),function(){function t(){c(this,t),this.clientList={}}return u(t,[{key:"addEvent",value:function(t,e){this.clientList[t]||(this.clientList[t]=[]),this.clientList[t].push(e)}},{key:"publish",value:function(){var t=Array.prototype.shift.call(arguments),e=this.clientList[t];if(!e||0===e.length)return!1;for(var n,r=0;n=e[r++];)n.apply(this,arguments)}}]),t}()),mt=new yt,gt={name:"Home",components:{Header:Y,videoChat:tt,textChat:vt,friendList:{}},data:function(){return{socket:null,user:null,friendList:null,pubSub:mt}},methods:{init:function(){var t=lt.init("123456789",this.user,{video:!0,audio:!0});this.socket=t,this.socket.initPubsub(this.pubSub)}},mounted:function(){this.user=this.$route.query.user,console.log(this.user,this.$route.query),this.init()}},bt=gt,wt=(n("c6bd"),Object(q["a"])(bt,r,o,!1,null,"187997fe",null));e["default"]=wt.exports},c6bd:function(t,e,n){"use strict";n("87f7")},c740:function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").findIndex,i=n("44d2"),a="findIndex",c=!0;a in[]&&Array(1)[a]((function(){c=!1})),r({target:"Array",proto:!0,forced:c},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(a)},d28b:function(t,e,n){var r=n("746f");r("iterator")},e01a:function(t,e,n){"use strict";var r=n("23e7"),o=n("83ab"),i=n("da84"),a=n("5135"),c=n("861d"),s=n("9bf2").f,u=n("e893"),f=i.Symbol;if(o&&"function"==typeof f&&(!("description"in f.prototype)||void 0!==f().description)){var l={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new f(t):void 0===t?f():f(t);return""===t&&(l[e]=!0),e};u(h,f);var p=h.prototype=f.prototype;p.constructor=h;var d=p.toString,v="Symbol(test)"==String(f("test")),y=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=d.call(t);if(a(l,t))return"";var n=v?e.slice(7,-1):e.replace(y,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},e538:function(t,e,n){var r=n("b622");e.f=r},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}}}]);
//# sourceMappingURL=Home.439c2626.js.map